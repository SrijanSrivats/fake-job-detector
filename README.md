# Fake Job Detector (R Shiny + XGBoost)

This project is an end-to-end **fake job posting detection** system built in **R**.  
It includes:

- A **Shiny web app** where users paste a job posting and get a “Likely Fake” / “Likely Genuine” verdict with confidence scores.
- A full **training pipeline** using **XGBoost** and `caret`.
- **Batch prediction** utilities and saved model performance visualizations.

---

## 1. Project Structure

Key files and folders:

- `app.R`  
  Shiny application (UI + server). Loads the trained model and exposes a web interface for prediction.

- `fake_job_prediction_full.R`  
  Inference + feature engineering pipeline used by the Shiny app:
  - Cleans and preprocesses text fields.
  - Builds numeric features from job description and requirements.
  - Applies the same scaler used during training.
  - Calls the trained XGBoost model to generate probabilities.

- `Training.r`  
  End-to-end training script:
  - Loads `fake_job_postings.csv`
  - Cleans and preprocesses text columns
  - Creates feature vectors (text + metadata)
  - Uses `caret` to train an `xgbTree` model with cross-validation
  - Evaluates the model (Accuracy, Precision, Recall, F1, AUC)
  - Saves:
    - `models/xgboost_model.rds`
    - `models/preproc_scaler.rds`
    - Visualizations in `visualizations/`

- `Testing.r`  
  Helper inference script for testing the trained model from R without the Shiny UI.

- `fake_job_postings.csv`  
  Dataset of job postings with a `fraudulent` label (0 = genuine, 1 = fake).

- `models/`  
  - `xgboost_model.rds` – trained XGBoost classifier  
  - `preproc_scaler.rds` – pre-processing / scaling object used to transform features

- `visualizations/`  
  Contains PNG plots and `model_performance.csv` generated by `Training.r`:
  - Class distribution
  - ROC curve
  - XGBoost feature importance
  - Metrics summary

- `www/`  
  Static assets for the Shiny app:
  - `styles.css` – custom styling (cards, result boxes, loading spinner, etc.)
  - Visualization images mirrored for use inside the app

- `FakeJobWeb.Rproj`  
  RStudio project file.

- `Testing.ipynb`, `Training.ipynb`  
  Jupyter notebooks mirroring the training / testing logic in an interactive format.

---

## 2. How the Model Works

### 2.1 Input Features

From the Shiny UI, a single job posting is described by:

- **Text fields**
  - `title`
  - `description`
  - `requirements`
  - `benefits`
  - `company_profile`

- **Binary numeric flags**
  - `telecommuting` (0/1)
  - `has_company_logo` (0/1)
  - `has_questions` (0/1)

### 2.2 Text Preprocessing

`fake_job_prediction_full.R` uses standard text-mining steps:

- Lowercasing
- Removing punctuation and numbers
- Removing English stopwords
- Stripping extra whitespace

From each cleaned text field it computes, for example:

- Word count
- Character count
- Average word length
- Count of suspicious “fake job” keywords (e.g., unusually high pay, urgent work-from-home wording, etc.)

These are created separately for description and requirements and then combined with metadata features (telecommuting, logo, questions, text lengths, etc.).

### 2.3 Model

- Algorithm: **XGBoost** (`xgbTree` via `caret`)
- Training:
  - Cross-validation (`trainControl` with 3-fold CV and `twoClassSummary`)
  - Optimizes for AUC / classification metrics
- Outputs:
  - Probability of “Yes” (fake) vs “No” (genuine)
  - Final confusion matrix and metrics saved to `visualizations/model_performance.csv`
  - ROC curve image and feature importance plots

---

## 3. Running the Shiny App

### 3.1 Prerequisites

You need R and the following packages (install once):

```r
install.packages(c(
  "shiny", "shinythemes", "DT", "ggplot2", "markdown",
  "tm", "stringr", "caret", "xgboost", "tidyverse",
  "randomForest", "e1071", "rpart", "rpart.plot",
  "pROC", "ROSE"
))
```

### 3.2 Start the app

In R or RStudio:

```r
setwd("path/to/FakeJobWeb")
shiny::runApp("app.R")
```

The app will open in your browser.

### 3.3 Using the app

1. Open the **“Job Prediction”** tab.
2. Fill in:
   - Title, Description, Requirements, Benefits, Company Profile.
   - Flags: Telecommuting, Company Logo, Has Questions (0 or 1).
3. Click **“Analyze Job Post”**.
4. The app shows:
   - A **red card** for “Likely Fake Job Post” or a **green card** for “Likely Genuine Job Post”.
   - Confidence percentage for the prediction.
   - Simple feature-based explanation and safety tips.

Other tabs:

- **Model Insights** – Shows saved visualizations (class distribution, ROC, feature importance).  
  > These require that `Training.r` has been run at least once to populate the `visualizations/` folder.

- **Examples** – Lets you load example fake/genuine posts into the form to see how the model reacts.

---

## 4. Training the Model from Scratch (Optional)

If you want to retrain:

1. Ensure `fake_job_postings.csv` is in the project root (`FakeJobWeb/`).
2. In R:

```r
setwd("path/to/FakeJobWeb")
source("Training.r")
```

The script will:

- Train an XGBoost model.
- Save the model and scaler to `models/`.
- Regenerate visualizations under `visualizations/`.

The Shiny app will then use the newly trained model automatically (as long as `models/xgboost_model.rds` and `models/preproc_scaler.rds` exist).

---

## 5. Batch Prediction

`fake_job_prediction_full.R` also supports **batch predictions** over a data frame of job posts:

- It generates:
  - `predictions_all_records.csv`
  - `predictions_fake_only.csv`
  - `predictions_genuine_only.csv`

These contain the original job fields plus prediction labels and probabilities.

---

## 6. Technologies Used

- **Language:** R
- **Web Framework:** Shiny
- **Modeling & ML:** `caret`, `xgboost`, `pROC`, `ROSE`
- **Text Mining:** `tm`, `stringr`
- **Visualization:** `ggplot2`
- **UI Styling:** `shinythemes`, custom CSS (`www/styles.css`)

---

## 7. Notes

- If the model files are missing, the Shiny app will show a notification asking you to run the training script first.
- This project is intended as an educational demo of combining **NLP + tabular features + Shiny** to detect potentially fraudulent job postings.
